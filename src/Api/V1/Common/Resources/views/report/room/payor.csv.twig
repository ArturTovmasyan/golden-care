{{ data.strategy }} Payor Report: {{ data.date }}
{{ data.strategy }} short name, {% if data.strategyId != constant('App\\Model\\GroupType::TYPE_REGION') %}Room/Bed #, {% endif %} Resident, Rent, Frequency, {% for paymentSource in data.sources %}{{ paymentSource.title|raw }},{% endfor %} Room Rent Total for month
{% set groupName = null %}{% set renderedGroup = null %}{% set newGroup = false %}
{% for datum in data.data %}{% if groupName != datum.typeName %}{% set groupName = datum.typeName %}{% endif %}{% if renderedGroup == datum.typeId %}{% set newGroup = false %}{% else %}{% set renderedGroup = datum.typeId %}{% set newGroup = true %}{% endif %}
    {{ datum.typeShorthand }}, {% if datum.roomNumber is defined and datum.bedNumber is defined %}{{ datum.roomNumber }} {{ datum.bedNumber }},{% endif %} {{ datum.firstName }} {{ datum.lastName }},{% if datum.amount is defined and datum.amount %}"$ {{ datum.amount|number_format(2, '.', ',') }}"{% else %}"$ {{ 0|number_format(2, '.', ',') }}"{% endif %},{% if datum.period is defined and datum.period %}"{{ rentPeriod(datum.period) }}"{% else %}N/A{% endif %},{% for paymentSource in data.sources %}{% set found=false %}{% if datum.sources is defined %}{% for source in datum.sources %}{% if source.id == paymentSource.id %}{% set found=true %}{% if source.amount is defined and source.amount %}"$ {{ source.amount|number_format(2, '.', ',') }}"{% else %}"$ {{ 0|number_format(2, '.', ',') }}"{% endif %}{% endif %}{% endfor %}{% if not found %}N/A{% endif %}{% else %}N/A{% endif %},{% endfor %}{% if data.calcAmount[datum.id] is defined %}"$ {{ data.calcAmount[datum.id]|number_format(2, '.', ',') }}"{% else %}"$ {{ 0|number_format(2, '.', ',') }}"{% endif %},,{% for key, sum in data.total %}{% if newGroup %}{% if key == renderedGroup %}{{ datum.typeShorthand }} SUM,"$ {{ sum|number_format(2, '.', ',') }}"{% endif %}{% endif %}{% endfor %},
{% endfor %}
