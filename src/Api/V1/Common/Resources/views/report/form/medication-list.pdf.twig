{% extends '@api_report/base.twig' %}
{% block pageTitle %}{% endblock %}
{% block pageContent %}

    {% for residentId, resident in data.residents %}
        <div class="page"></div>
        <span class="divider"></span>
        <span class="divider"></span>

        <table class="report-table main-table bordered">
            <tr class="divider"></tr>
            <thead>
            <tr>
                <td colspan="11" style="width: 100%; font-size: 13px !important; margin: 0; padding: 0;">
                    <div style="float: left; margin: 0; padding: 0;">
                        {% if data.images[resident.id] is defined %}
                            <img src="{{ data.images[resident.id] }}"
                                 style="display: block; margin: 0 auto; padding: 0; height: 100px; width: 100px; border: 1px solid black;"/>
                        {% else %}
                            <div style="display: block; margin: 0 auto; padding: 0; height: 100px; width: 100px; border: 1px solid black;"></div>
                        {% endif %}
                    </div>
                    <div style="float: left; height: 100px; width: 370px; padding-left: 5px; padding-right: 10px;">
                        <b style="font-size: 16px;">
                            {% if resident['firstName'] %}{{ resident['firstName'] }}{% if resident['lastName'] %}&nbsp;{{ resident['lastName'] }}{% endif %}{% else %}N/A{% endif %}
                        </b>
                        <div style="width: 100%;">
                            <div style="float: left; width: 62%">
                                {% if resident['birthday'] is defined and resident['birthday'] %}
                                    <div>Birthday&nbsp;-&nbsp;{{ resident['birthday']|date("F") }}
                                        &nbsp;{{ resident['birthday']|date("d") }}
                                        ,&nbsp;{{ resident['birthday']|date("Y") }}</div>
                                {% else %}
                                    <div>Birthday&nbsp;-&nbsp;N/A</div>
                                {% endif %}
                            </div>
                            <div style="float: left; width: 38%">
                                {% if resident['floor'] is defined %}
                                    <div>
                                        Floor&nbsp;-&nbsp;{% if resident.floor %}{{ resident.floor }}{% else %}N/A{% endif %}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div style="width: 100%;">
                            <div style="float: left; width: 62%">
                                {% if resident['birthday'] is defined and resident['birthday'] %}
                                    <div>Age&nbsp;-&nbsp;{{ age(resident['birthday']|date("m/d/Y")) }}</div>
                                {% else %}
                                    <div>Age&nbsp;-&nbsp;N/A</div>
                                {% endif %}
                            </div>
                            <div style="float: left; width: 38%">
                                {% if resident['careGroup'] is defined %}
                                    <div>
                                        Group&nbsp;-&nbsp;{% if resident['careGroup'] %}{{ resident['careGroup'] }}{% else %}N/A{% endif %}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div style="width: 100%;">
                            <div style="float: left; width: 62%">
                                Sex&nbsp;-&nbsp;{% if resident['gender'] == 1 %}Male{% elseif resident['gender'] == 2 %}Female{% endif %}
                            </div>
                            <div style="float: left; width: 38%">
                                {% if resident['careLevel'] is defined %}
                                    <div>
                                        Care&nbsp;Level&nbsp;-&nbsp;{% if resident['careLevel'] %}{{ resident['careLevel'] }}{% else %}N/A{% endif %}</div>
                                {% endif %}
                            </div>
                        </div>
                        <div style="width: 100%;">
                            <div style="float: left; width: 62%">
                                &nbsp;
                            </div>
                            <div style="float: left; width: 38%">
                                {% if resident['bedNumber'] is defined and resident['bedNumber'] %}
                                    <div>
                                        {% if resident['private'] %}Room{% else %}Room/Bed{% endif %}&nbsp;-&nbsp;
                                        {% if resident['roomNumber'] %}
                                            {{ resident['roomNumber'] }}&nbsp;
                                        {% endif %}
                                        {% if resident['bedNumber'] %}
                                            {% if resident['private'] %}
                                                &nbsp;
                                            {% else %}
                                                {{ resident['bedNumber'] }}
                                            {% endif %}
                                        {% else %}
                                            N/A
                                        {% endif %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div style="float: right; margin: 0; padding: 0;">
                        <div style="height: 5px;"></div>
                        <p style="margin: 0; text-align: center;"><b style="font-size: 18px !important;">Medication&nbsp;List</b>
                        </p>
                        <p style="margin: 0; text-align: center;">{% if resident['typeName'] is defined %}<b
                                    style="font-size: 12px !important;">{{ resident['typeName'] }}&nbsp;</b>{% endif %}
                        </p>
                        <p style="margin: 0; font-size: 12px !important; text-align: center;">{% if resident['address'] is defined and resident['address'] %}
                                {{ resident['address'] }}{% endif %}
                        </p>
                        <p style="margin: 0; font-size: 12px !important; text-align: center;">{% if resident['city'] is defined and resident['city'] %}
                                {{ resident['city'] }},&nbsp;{{ resident['stateAbbr'] }}&nbsp;{{ resident['zip'] }}{% endif %}
                        </p>
                        <p style="margin: 0; font-size: 12px !important; text-align: center;">
                            {% if resident['typePhone'] is defined and resident['typePhone'] %}
                                Phone:&nbsp;{{ resident['typePhone'] }}{% endif %}{% if resident['typePhone'] is defined and resident['typePhone'] and resident['typeFax'] is defined and resident['typeFax'] %},&nbsp;{% endif %}{% if resident['typeFax'] is defined and resident['typeFax'] %}Fax:&nbsp;{{ resident['typeFax'] }}{% endif %}
                        </p>
                        <p style="margin: 0; text-align: center;">{% if resident['license'] is defined and resident['license'] %}
                                <b style="font-size: 12px !important;">License&nbsp;{{ resident['license'] }}</b>{% endif %}
                        </p>
                    </div>
                    <div style="clear: both"></div>
                </td>
            </tr>
            <tr>
                <td colspan="11" style="border: none; height: 5px; width: 100%;"></td>
            </tr>
            </thead>
            <tbody>
            {% if resident.medications is defined %}
                {% if resident.medications.active is defined %}
                    <tr>
                        <th colspan="11">
                            <b style="float: left; font-size: 20px !important; text-align: left; margin-bottom: 5px;">Active
                                Medications</b>
                        </th>
                    </tr>
                    <tr>
                        <td><b>Medication</b></td>
                        <td><b>Dosage</b></td>
                        <td><b>Instructions</b></td>
                        <td><b>AM</b></td>
                        <td><b>NN</b></td>
                        <td><b>PM</b></td>
                        <td><b>HS</b></td>
                        <td><b>PRN</b></td>
                        <td><b>TR</b></td>
                        <td><b>Prescription #</b></td>
                        <td><b>Prescribing Physician</b></td>
                    </tr>
                    {% for medication in resident.medications.active %}
                        <tr>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medication }}</td>
                            <td style="height: 50px; vertical-align: middle;">{% if medication.dosage %}{{ medication.dosage }} ({{ medication.dosageUnit }}){% endif %}</td>
                            <td style="width: 250px; height: 50px; vertical-align: middle;">{{ medication.notes }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medicationAm }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medicationNn }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medicationPm }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medicationHs }}</td>
                            <td style="height: 50px; vertical-align: middle;">{% if medication.medicationPrn %}Yes{% else %}No{% endif %}</td>
                            <td style="height: 50px; vertical-align: middle;">{% if medication.medicationTreatment %}Yes{% else %}No{% endif %}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.prescriptionNumber }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.physicianFirstName ~ ' ' ~ medication.physicianLastName }}</td>
                        </tr>
                    {% endfor %}
                {% endif %}
                {% if data.discontinued and resident.medications.discontinued is defined %}
                    <tr class="divider"></tr>
                    <tr class="divider"></tr>
                    <tr>
                        <th colspan="11">
                            <b style="float: left; font-size: 20px !important; text-align: left; margin-bottom: 5px;">Discontinued
                                Medications</b>
                        </th>
                    </tr>
                    <tr>
                        <td><b>Medication</b></td>
                        <td><b>Dosage</b></td>
                        <td><b>Instructions</b></td>
                        <td><b>AM</b></td>
                        <td><b>NN</b></td>
                        <td><b>PM</b></td>
                        <td><b>HS</b></td>
                        <td><b>PRN</b></td>
                        <td><b>TR</b></td>
                        <td><b>Prescription #</b></td>
                        <td><b>Prescribing Physician</b></td>
                    </tr>
                    {% for medication in resident.medications.discontinued %}
                        <tr>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medication }}</td>
                            <td style="height: 50px; vertical-align: middle;">{% if medication.dosage %}{{ medication.dosage }} ({{ medication.dosageUnit }}){% endif %}</td>
                            <td style="width: 250px; height: 50px; vertical-align: middle;">{{ medication.notes }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medicationAm }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medicationNn }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medicationPm }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.medicationHs }}</td>
                            <td style="height: 50px; vertical-align: middle;">{% if medication.medicationPrn %}Yes{% else %}No{% endif %}</td>
                            <td style="height: 50px; vertical-align: middle;">{% if medication.medicationTreatment %}Yes{% else %}No{% endif %}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.prescriptionNumber }}</td>
                            <td style="height: 50px; vertical-align: middle;">{{ medication.physicianFirstName ~ ' ' ~ medication.physicianLastName }}</td>
                        </tr>
                    {% endfor %}
                {% endif %}
                {% if resident.medications.active is not defined and data.discontinued == false %}
                    <tr>
                        <td><b>No&nbsp;Medications</b></td>
                    </tr>
                {% endif %}
            {% else %}
                <tr>
                    <td><b>No&nbsp;Medications</b></td>
                </tr>
            {% endif %}
            </tbody>
        </table>
    {% endfor %}

{% endblock %}
{% block pageFooter %}
{% endblock %}